#labels query
#This page tells you how to write a query.

The SASE 1.0 uses a query file to describe a query. A query file consists of two parts: header information and states.

=Header=
In header information part, we have several parameters:
||selectionStrategy|| specifies the selection strategy for the query, in SASE 1.0, you can choose "skip-till-ext-match" or "partition-contiguity"||
||timeWindow || specifies the size of time window||
||partition attribute || optional, you can specify an attribute as the partition attribute||

=State=
A query can be represented by an NFA. In the State part, we describe the states of the NFA. For each NFA state, we use one line to describe it. In each line, we have multiple parameters as following:

||State|| assigns a number for this state||
||type|| specifies the type of this state, "normal" or "kleeneClosure"||
||eventtype|| specifies the event type which satisfies this state||

We use an "&" to connect the parameters.

After providing the basic information for this state,  we can describe the edge(s), and each edge can be separated by "|". An edge contains the edgetype and predicate(s).

||edgetype|| specifies the type of an edge, "begin" , "take" or "proceed"||
||predicate|| specifies the requirement for this state. If you want to use an equation, please use "==" instead of "=", e.g., "price == 10".||

= Sample =
{{{
SelectionStrategy = partition-contiguity | TimeWindow = 500 | partitionAttribute = symbol
State=1 & type = kleeneClosure & eventtype = stock | edgetype = begin  & price % 500 == 0 | edgetype = take | edgetype = proceed 
State=2 & type = normal & eventtype = stock | edgetype = begin & volume < 150
end
}}}


You can find more examples in SASE 1.0 package under query/ folder. All query files use extension *.query*.